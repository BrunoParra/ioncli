"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[354],{354:(O,g,i)=>{i.r(g),i.d(g,{ViajePageModule:()=>x});var u=i(6814),l=i(95),s=i(3582),d=i(2692),p=i(5861),e=i(5879),m=i(9252),h=i(1468),f=i(4414);const v=["map"];function b(n,a){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA()()),2&n){const r=e.oxw();e.xp6(2),e.hij("Hasta: ",r.dataViaje.destino.direccion,"")}}const M=[{path:"",component:(()=>{var n;class a{constructor(t,o,c,C){this.gmaps=t,this.api=o,this.navController=c,this.route=C,this.dataViaje={},this.userViaje={},this.center={lat:-33.5113289,lng:-70.7521038},this.markers=[]}ngOnInit(){this.iniciarTodo(),this.redireccion="true"===localStorage.getItem("esConductor")?"/form-prestar":"/home"}iniciarTodo(){var t=this;return(0,p.Z)(function*(){t.idURL=t.route.snapshot.params.id,t.cargarServicio(),t.loadMap(),t.dataViaje=yield t.api.getViajesById(t.idURL.toString()),t.userViaje=yield t.api.getUsuarioByEmail(t.dataViaje.conductor),t.cargado=!0,t.directionsService=new t.googleMaps.DirectionsService,t.directionsRenderer=new t.googleMaps.DirectionsRenderer,t.directionsRenderer.setMap(t.map),t.calcularRuta(t.dataViaje)})()}cargarServicio(){var t=this;return(0,p.Z)(function*(){t.googleMaps=yield t.gmaps.loadGoogleMaps()})()}loadMap(){try{const t=this.mapElementRef.nativeElement,c={center:new this.googleMaps.LatLng(this.center.lat,this.center.lng),zoom:17,options:{disableDefaultUI:!0,mapTypeId:"terrain",styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}]}};this.map=new this.googleMaps.Map(t,c)}catch(t){console.log(t)}}calcularRuta(t){this.directionsService.route({origin:{lat:-33.5113289,lng:-70.7521038},destination:{lat:t.destino.lat,lng:t.destino.lng},travelMode:this.googleMaps.TravelMode.DRIVING}).then(o=>{this.directionsRenderer.setDirections(o)}).catch(o=>window.alert("Directions request failed due to "+o))}volver(){this.navController.navigateRoot(this.redireccion)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(m.V),e.Y36(h.c),e.Y36(f.SH),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-viaje"]],viewQuery:function(t,o){if(1&t&&e.Gf(v,7),2&t){let c;e.iGM(c=e.CRH())&&(o.mapElementRef=c.first)}},decls:37,vars:4,consts:[["id","container"],[1,"hamburguesa"],["color","dark"],[1,"mapa"],["map",""],[1,"inferior"],[1,"encabezado-conductor"],["src","\\assets\\imgs\\avatar.svg","alt",""],[1,"btn-chat"],["name","chatbubble-ellipses-outline"],[1,"btn-cancel",3,"click"],["name","close-circle-outline"],[1,"container-input-sup"],[1,"simbolo"],[1,"linea"],["action",""],[4,"ngIf"],[1,"info-conductor"],[1,"info-detalle"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),e._UZ(3,"ion-menu-button",2),e.qZA(),e._UZ(4,"div",3,4),e.TgZ(6,"div",5)(7,"div",6),e._UZ(8,"img",7),e.TgZ(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"ion-icon",9),e.qZA(),e.TgZ(13,"div",10),e.NdJ("click",function(){return o.volver()}),e._UZ(14,"ion-icon",11),e.qZA()(),e.TgZ(15,"div",12)(16,"div",13),e._UZ(17,"div",14),e.qZA(),e.TgZ(18,"form",15)(19,"ion-item")(20,"ion-label"),e._uU(21,"Desde: Duoc Maipu"),e.qZA()(),e.YNc(22,b,3,1,"ion-item",16),e.qZA()(),e.TgZ(23,"div",17)(24,"div",18)(25,"div")(26,"p")(27,"strong"),e._uU(28,"Valor"),e.qZA()(),e.TgZ(29,"p"),e._uU(30),e.qZA()(),e.TgZ(31,"div")(32,"p")(33,"strong"),e._uU(34,"Patente"),e.qZA()(),e.TgZ(35,"p"),e._uU(36),e.qZA()()()()()()()),2&t&&(e.xp6(10),e.Oqu(o.userViaje.nombre),e.xp6(12),e.Q6J("ngIf",o.cargado),e.xp6(8),e.hij("$",o.dataViaje.valorViaje,""),e.xp6(6),e.Oqu(o.dataViaje.patente))},dependencies:[u.O5,l._Y,l.JL,l.F,s.W2,s.gu,s.Ie,s.Q$,s.fG],styles:['.hamburguesa[_ngcontent-%COMP%]{position:absolute;top:40px;left:20px;height:40px;width:40px;background-color:#fff;box-shadow:0 0 10px #0006;border-radius:50%}#container[_ngcontent-%COMP%]{box-shadow:0 0 10px #0006;max-width:750px}.mapa[_ngcontent-%COMP%]{width:100%;height:99vh;object-fit:cover;margin:0}.inferior[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:50%;transform:translate(-50%);min-width:320px;max-width:80%;overflow:hidden;padding:1rem;background-color:#fff;border-radius:1.5rem;box-shadow:0 10px 15px #00000026}.inferior[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-right:.7rem}.inferior[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{overflow:hidden}@media (max-width: 400px){.inferior[_ngcontent-%COMP%]{width:100%;border-radius:0;bottom:0}.btn-chat[_ngcontent-%COMP%]{margin-left:0}}.info-detalle[_ngcontent-%COMP%]{display:flex;justify-content:space-around;text-align:center}.info-detalle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-block:0}.encabezado-conductor[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:.5rem;border-bottom:1px solid var(--ion-color-medium)}.encabezado-conductor[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){width:50px;height:50px;border-radius:50%}.encabezado-conductor[_ngcontent-%COMP%]   .btn-chat[_ngcontent-%COMP%], .encabezado-conductor[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{--btn-size: 40px;min-width:var(--btn-size);min-height:var(--btn-size);display:flex;justify-content:center;align-items:center;background-color:gray;border-radius:50%}.encabezado-conductor[_ngcontent-%COMP%]   .btn-chat[_ngcontent-%COMP%]{margin-right:.5rem;background-color:var(--ion-color-tertiary);margin-left:auto}.encabezado-conductor[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background-color:var(--ion-color-danger-tint);cursor:pointer}.encabezado-conductor[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.encabezado-conductor[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{--avatar-size: 60px;height:var(--avatar-size);width:var(--avatar-size);border-radius:50%;object-fit:cover;margin-right:1rem}ion-content[_ngcontent-%COMP%]{--circulo: 13px;--sim-color: #5e5e5e}.simbolo[_ngcontent-%COMP%]{width:40px;margin-right:.4rem}.linea[_ngcontent-%COMP%]{position:relative;width:2px;height:55px;background-color:var(--sim-color);margin:0 auto}.linea[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-4px;width:10px;height:10px;background-color:var(--sim-color)}.linea[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:-5px;width:var(--circulo);height:var(--circulo);background-color:var(--ion-color-secondary);box-shadow:0 0 5px 1px #428d8380;border-radius:50%}form[_ngcontent-%COMP%]{flex:1}.container-input-sup[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:2rem}.inferior[_ngcontent-%COMP%]:after{position:absolute;content:"";right:0;top:130px;display:block;width:55px;height:60px;background-color:#fff;z-index:200}.info-conductor[_ngcontent-%COMP%]{margin-top:.5rem}']}),a})()}];let P=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(M),d.Bz]}),a})(),x=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,l.u5,s.Pc,P]}),a})()}}]);